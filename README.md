# Linux

### Основные команды

```
sudo useradd -p password -s /bin/bash test1  # Добавить пользователя с каталогом
sudo passwd 12345                            # назначить пользователю пароль
sudo usermod -aG sudo pg                     # включить пользователя в группу sudo
tar -xvf postgresql-14.3.tar.gz              # распаковать архив tar
cat /etc/passwd                              # посмотреть пользователей
ssh user@192.168.1.9                         # Подключение по SSH
find -name "spreport*"                       # Поиск файла по имени spreport%
nano /etc/ssh/sshd_config                    # Здесь можно настроить вход по паролю, затем sudo service ssh restart
```

# Установка программ пакетным менеджером

````
sudo apt install nano # Установка пакета
sudo apt remove nano  # Удаление пакета
sudo apt autoclean    # Удаление кэша пакетов
````

# Процессы
```
ps               # Процессы текущего пользователя
ps ax            # Все процессы в системе. a - у которых есть управляющий терминал, x - у которых нет управляющего терминала
ps ax | head     # Все процессы в системе (первый 10 процессов)
ps -p 1          # Cмотреть информацию о конкретном процессе
ps u -u www-data # Процессы конкретного пользователя
```

# Статусы процессов
```
D — беспробудный сон, ожидая ввод/вывод какого-нибудь устройства;
I – бездействующий поток ядра;
R — готов выполнятся или уже выполняется процессором;
S — сон, ожидает каких-нибудь ресурсов;
T — остановлен сигналом;
t — остановлен дебагом;
X — мертвый, никогда не должно быть видно;
Z — зомби, мертвый но не погребенный, то есть не успел освободить pid;
< — высокий приоритет;
N — низкий приоритет;
L — страницы процесса заблокированы в памяти;
s — лидер сессии;
l — многопоточный;
+ — выполняется на переднем плане, то есть это не фоновый процесс.
```

### Сеть 

````
ip a                 # IP адреса
ip n                 # ARP таблица
sudo netstat -tulpn  # открытые порты
sudo ss -tulpn       # открытые порты (молодежный вариант)
````

### Диагностика сетевых проблем

````
nslookup <hostname>      # проверка разрешения DNS имени
ping <host>              # отправка ICMP пакетов до хоста
traceroute <host>        # трассировка до хоста UDP пакетами
telnet <host> <port>     # проверка доступности TCP порта на хосте
nmap <host>              # сетевое сканирование хоста
nmap -p T:<port> <host>  # проверка доступности TCP порта на хосте (молодежный вариант)
nmap -p U:<port> <host>  # проверка доступности UDP порта на хосте (молодежный вариант)
````


### Файловая система

````
/bin (binaries) – исполняемые файлы самых необходимых утилит. Может быть символьной ссылкой на /usr/bin

/boot – файлы, необходимые для самого первого этапа загрузки – загрузки ядра (и обычно само ядро)

/dev (devices) – блочные и символьные файлы устройств (диски, терминалы, клавиатуры, принтеры и др.)

/etc (etcetera) – конфигурационные файлы системы и различных программ

/home – домашние каталоги пользователей для хранения «личных» файлов

/lib (libraries) – файлы библиотек (стандартных функций, необходимых многим программам), необходимых для работы утилит. Может быть символьной ссылкой на /usr/bin

/mnt (mount) – каталог для подключения файловых систем (съемных носителей и др.)

/opt (optional) – каталог для дополнительных программ (проприетарных драйверов, агентов мониторинга и др.)

/proc (process) – файлы в оперативной памяти, в которых содержится информация о выполняемых в системе процессах

/root – домашний каталог пользователя root

/sbin (system binaries) – файлы системных утилит, необходимые для загрузки, резервного копирования и восстановления системы. Может быть символьной ссылкой на /usr/sbin

/sys (system) – виртуальная файловая система sysfs, которая содержит информацию об аппаратном обеспечении (ЦПУ, ОЗУ, дисках, сетевых устройствах), драйверах, ядре системы и др.

/tmp – каталог для временных файлов, обычно зачищается при каждой загрузке системы

/usr – пользовательский каталог, который содержит каталоги исполняемых файлов и конфигурационных файлов

/var (variable) – файлы, создаваемые или используемые различными программами (логи, очереди, идентификаторы процессов, БД и др.)
````